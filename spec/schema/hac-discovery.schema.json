{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://hac.example/schema/hac-discovery.schema.json",
  "title": "HAC Discovery Response",
  "description": "The HTTP Agent Context (HAC) discovery response returned from the API root, enabling agents to discover available resources.",
  "type": "object",
  "required": ["_hac"],
  "properties": {
    "_hac": {
      "$ref": "#/$defs/DiscoveryMeta"
    }
  },
  "$defs": {
    "DiscoveryMeta": {
      "type": "object",
      "description": "Discovery metadata describing the API and its available resources.",
      "required": ["name", "resources"],
      "properties": {
        "name": {
          "type": "string",
          "description": "The human-readable name of the API.",
          "examples": ["Acme API"]
        },
        "version": {
          "type": "string",
          "description": "The version of the API (not the HAC spec version).",
          "examples": ["2.1"]
        },
        "description": {
          "type": "string",
          "description": "An LLM-optimized description of the API's purpose and capabilities."
        },
        "resources": {
          "type": "array",
          "description": "The top-level resources available in this API.",
          "items": {
            "$ref": "#/$defs/ResourceEntry"
          }
        }
      }
    },
    "ResourceEntry": {
      "type": "object",
      "description": "A discoverable API resource.",
      "required": ["rel", "href"],
      "properties": {
        "rel": {
          "type": "string",
          "description": "Link relation type identifying the resource.",
          "examples": ["users", "orders"]
        },
        "href": {
          "type": "string",
          "description": "The base URI for the resource.",
          "format": "uri-reference",
          "examples": ["/users", "/orders"]
        },
        "description": {
          "type": "string",
          "description": "An LLM-optimized description of the resource."
        },
        "methods": {
          "type": "array",
          "description": "HTTP methods supported by this resource endpoint.",
          "items": {
            "type": "string",
            "enum": ["GET", "HEAD", "POST", "PUT", "PATCH", "DELETE", "OPTIONS"]
          }
        }
      }
    }
  }
}
